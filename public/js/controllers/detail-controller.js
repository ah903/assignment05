///////////////////////////////////////////////////////////////////////////////////////////
// Detail Controller
///////////////////////////////////////////////////////////////////////////////////////////
// Manages the data that is presented to the view and provides interaction points
// To Back end service functionality. Attached to attire-app module. Uses Minification
// Safe Injection mechanism
///////////////////////////////////////////////////////////////////////////////////////////
// Dependencies
// $scope, $routeParams, $location, $routeScope, ProductFactory
///////////////////////////////////////////////////////////////////////////////////////////

angular.module("attire-app").controller("DetailController", ["$scope","$routeParams","ProductFactory","BasketFactory",function($scope,$routeParams,ProductFactory,BasketFactory){

	///////////////////////////////////////////////////////////////////////////
	// Initial View - Load Data When Controller Is Instantiated
	///////////////////////////////////////////////////////////////////////////
	ProductFactory.getProductById($routeParams.productId).then(function(response){
		$scope.CurrentProduct=response;	
	})

	///////////////////////////////////////////////////////////////////////////
	// Controller Functions Exposed to View By Scope
	///////////////////////////////////////////////////////////////////////////
	$scope.AddToBasket = function(product){
		$scope.Basket = BasketFactory.addToBasket(product,1);
	}

	///////////////////////////////////////////////////////////////////////////
	// Controller Functions Exposed to View By Scope
	///////////////////////////////////////////////////////////////////////////
	$scope.GetBasket = function(product){
		$scope.Basket = BasketFactory.getBasket();
	}

}]);
